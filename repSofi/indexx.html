<!DOCTYPE html>
<html lang="pt-br">
<!-- Define o idioma da página como português do Brasil -->

<head>
    <meta charset="utf-8"> <!-- Codificação de caracteres para suportar acentuação -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Torna o layout responsivo para dispositivos móveis -->
    <title> Invaders</title> <!-- Título da aba do navegador -->

    <!-- Bootstrap CSS (para layout responsivo e componentes prontos) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <styles>
        body{
        background-attachment: fixed;
        background-image: url("background3.jpg");
        background-size: cover;
        }
        .nave{
        max-width: 100px;
        max-height: 150px;
        width: auto;
        height: auto;
        }

        .shadow-custom {
        box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.3); /* Aplique a sombra com mais controle */
        }
        .clock{
        max-width: 70px;
        max-height: 70px;
        width: auto;
        height: auto;
        }
        .missil{
        max-width: 55px;
        max-height: 55px;
        width: auto;
        height: auto;
        }

        .painel-informativo {
        color: white;
        background-color: transparent;
        border: 1px solid white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 70%;
        box-shadow: 1px 1px 10px 4px rgba(240, 233, 233, 0.7);
        }


        #missil1, #missil2 {
        position: absolute;
        bottom: 100px;
        left: 50%;
        width: 30px;
        height: 100px;

        opacity: 0;
        transform: translateY(0);
        transition: transform 0.4s linear, opacity 0.2s ease-out;
        pointer-events: none;
        }


        .alien {
        position: absolute;
        width: 60px;
        height: 60px;
        pointer-events: none;
        }

    </styles>

</head>

<body class="m-0 p-0" style="height: 100vh;" onload="startCounter()">
    <!-- O corpo da página tem altura total da tela, sem margens e paddings. Ao carregar, executa a função de iniciar o cronômetro -->

    <div class="container-fluid px-0 h-100">
        <!-- Container principal que ocupa toda a altura da tela e não tem padding horizontal -->
        <div class="row g-0 h-50">
            <!-- Primeira metade da tela -->
            <div class="col-2 h-100">
                <!-- Coluna lateral com 2/12 da largura, usada como painel de informações -->
                <div class="col painel-informativo">
                    <!-- Painel informativo customizado -->
                    <!-- Relógio do jogo -->
                    <div class="row d-flex align-items-center mb-3">
                        <!-- Alinha verticalmente os elementos -->
                        <img class="clock me-2" src="clock.png" alt=""> <!-- Ícone de relógio -->
                        <div class="col-4">
                            <h3 id="v">0</h3>
                        </div> <!-- Tempo do jogo aparece aqui -->
                    </div>

                    <!-- Vidas do jogador -->
                    <div class="row d-flex align-items-center mb-3">
                        <img class="missil me-3" src="nave.png" alt=""> <!-- Ícone da nave representando vidas -->
                        <div class="col-4">
                            <h3 id="life">LIFE:3</h3>
                        </div> <!-- Quantidade de vidas restante -->
                    </div>

                    <!-- Pontuação (aliens destruídos) -->
                    <div class="row d-flex align-items-center ">
                        <img class="missil" style="max-width: 75px;" src="alien.png" alt=""> <!-- Ícone de alien -->
                        <div class="col-4">
                            <h3>ALIEN:<span id="pontuacao">0</span></h3>
                        </div> <!-- Pontuação dos aliens -->
                    </div>
                </div>
            </div>

            <div class="col-10 text-white">
                <!-- Área principal com 10/12 da largura para os aliens aparecerem -->
                <div id="alien-container" class="position-relative w-100 h-100"></div>
                <!-- Container onde os aliens serão posicionados dinamicamente -->
            </div>
        </div>

        <div class="row g-0 h-50">
            <!-- Segunda metade da tela -->
            <div class="col d-flex text-center align-items-end justify-content-center">
                <!-- Centraliza a nave horizontal e verticalmente -->
                <div class="naveContainer">
                    <!-- Container da nave e mísseis -->
                    <img class="missel img-fluid" src="missil.png" alt="missel-top"
                        style="transition: transform 0.2s ease;" id="missil1"> <!-- Primeiro míssil (lado esquerdo) -->
                    <img class="nave img-fluid" src="nave.png" alt="nave-top" style="transition: transform 0.2s ease;">
                    <!-- Imagem da nave -->
                    <img class="missel img-fluid" src="missil.png" alt="missel-top"
                        style="transition: transform 0.2s ease;" id="missil2"> <!-- Segundo míssil (lado direito) -->
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay de pausa (fica visível quando o jogo é pausado com "p") -->
    <div id="pause-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); color: white; z-index: 9999; justify-content: center; align-items: center; text-align: center;">
        <h1>Pause</h1> <!-- Texto exibido durante a pausa -->
    </div>


    <script>
        let val = 0; // Armazena o tempo em segundos desde o início do jogo
        let id; // Identificador do intervalo de tempo (para pausar/continuar)
        let isPaused = false; // Controla se o jogo está pausado ou não
        let flag = 0; // Variável reserva (pode ser usada para alternância de mísseis)
        let pontuacao = 0; // Armazena a pontuação atual do jogador
        let vidas = 3; // Número inicial de vidas

        function add() {
            val++; // Incrementa o contador de tempo em 1 segundo
            const hours = Math.floor(val / 3600); // Converte segundos em horas
            const minutes = Math.floor((val % 3600) / 60); // Calcula os minutos restantes
            const seconds = val % 60; // Calcula os segundos restantes
            const formattedTime = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`; // Formata o tempo como hh:mm:ss com dois dígitos
            document.querySelector("#v").textContent = formattedTime; // Atualiza o conteúdo do elemento com id="v" com o tempo formatado
        }

        function startCounter() {
            id = setInterval(add, 1000); // Executa a função add() a cada 1000ms (1 segundo)
        }

        function stopCounter() {
            clearInterval(id); // Cancela o intervalo, pausando o contador
        }

        const nave = document.querySelector(".nave"); // Seleciona o elemento da nave
        let position = 0; // Define a posição horizontal inicial da nave

        document.addEventListener("keydown", (event) => {
            if (event.key.toLowerCase() === "p") {
                togglePause(); // Pausa ou retoma o jogo ao pressionar "p"
                return; // Evita que outras teclas sejam processadas
            }

            if (isPaused) return; // Se estiver pausado, não movimenta a nave

            const step = 10; // Quantidade de pixels que a nave se move por vez
            const containerWidth = window.innerWidth; // Largura da janela
            const naveWidth = nave.offsetWidth; // Largura da nave

            if (event.key === "ArrowRight") {
                position += step; // Move a nave para a direita
                nave.style.transform = `translateX(${position}px)`; // Aplica a posição com CSS
            } else if (event.key === "ArrowLeft") {
                position -= step; // Move a nave para a esquerda
                nave.style.transform = `translateX(${position}px)`; // Aplica a posição com CSS
            }
        });

        function togglePause() {
            const pauseOverlay = document.querySelector("#pause-overlay"); // Seleciona a tela de pausa
            if (!isPaused) {
                stopCounter(); // Pausa o contador de tempo
                isPaused = true; // Marca o jogo como pausado
                pauseOverlay.style.display = "flex"; // Exibe a tela de pausa
            } else {
                startCounter(); // Retoma o contador de tempo
                isPaused = false; // Marca o jogo como ativo
                pauseOverlay.style.display = "none"; // Esconde a tela de pausa
            }
        }

        function atirar(tecla) {
            if (isPaused) return; // Não atira se o jogo estiver pausado
            const naveRect = nave.getBoundingClientRect(); // Pega posição e dimensões da nave
            const naveCenter = naveRect.left + naveRect.width / 2; // Calcula o centro da nave
            const deslocamento = 30; // Deslocamento lateral entre os mísseis
            let missil; // Variável para o míssil a ser disparado
            if (tecla === "a") {
                missil = document.getElementById("missil1"); // Primeiro míssil
            } else if (tecla === "d") {
                missil = document.getElementById("missil2"); // Segundo míssil
            }
            if (!missil) return; // Se nenhum míssil foi selecionado, não faz nada
            missil.style.left = `${naveCenter + (tecla === "a" ? -deslocamento : deslocamento) - missil.offsetWidth / 2}px`; // Posiciona o míssil baseado no centro da nave
            missil.style.transition = "none"; // Remove qualquer transição anterior
            missil.style.transform = "translateY(0)"; // Coloca o míssil na posição de partida (embaixo)
            missil.style.opacity = "1"; // Torna o míssil visível
            void missil.offsetWidth; // Força o navegador a aplicar as mudanças antes da animação
            missil.style.transition = "transform 0.4s linear, opacity 0.2s ease-out"; // Define a animação de subida
            missil.style.transform = "translateY(-600px)"; // Move o míssil para cima
            const intervaloColisao = setInterval(() => {
                detectarColisao(missil); // Verifica colisão durante o voo
            }, 50);
            setTimeout(() => {
                missil.style.opacity = "0"; // Torna o míssil invisível
                missil.style.transform = "translateY(0)"; // Volta o míssil para posição inicial
                clearInterval(intervaloColisao); // Para a verificação de colisão
            }, 400); // Após 400ms, reinicia o míssil
        }

        document.addEventListener("keydown", (event) => {
            if (event.key.toLowerCase() === "a") {
                atirar("a"); // Dispara o primeiro míssil com a tecla "A"
            } else if (event.key.toLowerCase() === "d") {
                atirar("d"); // Dispara o segundo míssil com a tecla "D"
            }
        });

        function criarAliens() {
            const container = document.getElementById("alien-container"); // Container onde os aliens serão adicionados
            const rows = 3; // Número de linhas de aliens
            const cols = 8; // Número de colunas de aliens
            const spacingX = 80; // Espaçamento horizontal entre os aliens
            const spacingY = 80; // Espaçamento vertical entre os aliens
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const alien = document.createElement("img"); // Cria um novo elemento de imagem
                    alien.src = "alien.png"; // Define o caminho da imagem do alien
                    alien.classList.add("alien"); // Adiciona a classe para estilização via CSS
                    alien.style.left = `${j * spacingX + 150}px`; // Define a posição horizontal do alien
                    alien.style.top = `${i * spacingY + 20}px`; // Define a posição vertical do alien
                    container.appendChild(alien); // Adiciona o alien no container
                }
            }
        }

        function detectarColisao(missil) {
            const missilRect = missil.getBoundingClientRect(); // Pega as dimensões e posição atual do míssil
            const aliens = document.querySelectorAll(".alien"); // Seleciona todos os aliens existentes na tela
            aliens.forEach((alien) => {
                const alienRect = alien.getBoundingClientRect(); // Pega a posição do alien
                const colidiu =
                    missilRect.left < alienRect.right &&
                    missilRect.right > alienRect.left &&
                    missilRect.top < alienRect.bottom &&
                    missilRect.bottom > alienRect.top; // Verifica sobreposição (colisão)
                if (colidiu) {
                    alien.remove(); // Remove o alien atingido
                    pontuacao += 1; // Incrementa a pontuação
                    document.getElementById("pontuacao").textContent = pontuacao; // Atualiza a pontuação na interface
                }
            });
        }

        function moverAliensParaBaixo() {
            if (isPaused) return; // Se o jogo estiver pausado, não move
            const aliens = document.querySelectorAll(".alien"); // Pega todos os aliens
            const naveRect = nave.getBoundingClientRect(); // Posição atual da nave
            aliens.forEach((alien) => {
                const topAtual = parseFloat(alien.style.top) || 0; // Posição vertical atual do alien
                const novoTop = topAtual + 5; // Novo valor (descendo)
                alien.style.top = `${novoTop}px`; // Aplica nova posição
                const alienRect = alien.getBoundingClientRect(); // Posição atual do alien
                const colidiu =
                    alienRect.bottom >= naveRect.top &&
                    alienRect.top <= naveRect.bottom &&
                    alienRect.right >= naveRect.left &&
                    alienRect.left <= naveRect.right; // Verifica colisão com a nave
                if (colidiu) {
                    vidas--; // Perde uma vida
                    atualizarPlacarDeVidas(); // Atualiza a interface
                    if (vidas <= 0) {
                        alert("Game Over!"); // Fim de jogo
                        window.location.reload(); // Recarrega a página
                    } else {
                        alert("Você perdeu uma vida!"); // Alerta
                        reiniciarAliens(); // Reposiciona os aliens (supondo que exista essa função)
                    }
                }
            });
        }

        function atualizarPlacarDeVidas() {
            document.getElementById("life").textContent = `LIFE:${vidas}`; // Atualiza contador de vidas na tela
        }

        window.onload = () => {
            startCounter(); // Inicia o cronômetro
            criarAliens(); // Cria os aliens na tela
            setInterval(moverAliensParaBaixo, 500); // Move os aliens para baixo a cada 500ms
        };
    </script>
</body>

</html>